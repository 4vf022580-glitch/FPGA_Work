# Project Pre-Burn: Day 1 - The First Silicon

> **Date:** 2025-12-27 (Beijing Time)
> **Status:** Mission Accomplished (100% Complete)
> **Author:** Future IC Engineer

## 1. 项目概述 (Overview)

本项目是《预燃行动 (Project Pre-Burn)》的第一天成果。
**核心目标**：从零开始构建并验证一个 4 位算术逻辑单元 (ALU)，完成从 RTL 设计到行为仿真的全流程闭环。
**战略意义**：打破 CS 软件思维，建立“电路连线”和“时序仿真”的底层硬件认知。

## 2. 开发环境 (Environment)

* **IDE**: Xilinx Vivado 2024.x
* **Device**: Artix-7 `xc7a35tcpg236-1` (Basys3 开发板核心)
* **Editor**: Vivado Native Editor (为了强化语法肌肉记忆，暂缓挂载 VS Code)
* **Language**: Verilog HDL (IEEE 1364-2005)

## 3. 理论军火库 (HDLBits Knowledge Base)

在 HDLBits 的 *Vectors* 和 *Operators* 章节中，我们提炼了以下关键语法，并直接应用到了 ALU 设计中：

### A. 向量 (Vectors) & 位宽

* **概念**：硬件里的“数组”其实是一束并行的电线。
* **语法**：`wire [3:0] a;` 代表 4 根线，`a[3]` 是最高位（MSB）。
* **实战应用**：ALU 的输入定义 `input [3:0] a` 即源于此。

### B. 拼接与复制 (Concatenation & Replication)

这是 Day 1 最核心的“瑞士军刀”，在 C 语言中不存在的操作。

* **拼接 `{}**`：将零散的信号拼成一束宽总线。
* *HDLBits 练习*：`{a, b, c}`
* *ALU 实战*：位反转逻辑 `res = {4'b0, a[0], a[1], a[2], a[3]};`


* **复制 `{n{}}**`：将某一位信号重复 n 次。
* *HDLBits 练习*：`{8{1'b1}}`
* *ALU 实战*：符号扩展逻辑 `res = {{4{a[3]}}, a};`（将符号位复制 4 次填补高位）。

### C. 运算符 (Operators)

* **算术运算**：`+`, `-`（直接调用加法器/进位链）。
* **位运算**：`^` (XOR), `&` (AND).
* **三元运算符**：`cond ? a : b` (本质是 MUX)。

## 4. 模块定义 (Design Specifications)

### 核心模块: `alu.v`

这是一个纯组合逻辑电路（Combinational Logic），无时钟，输出随输入瞬间变化。

| 端口名 | 方向 | 位宽 | 物理映射 (Basys3) | 描述 |
| --- | --- | --- | --- | --- |
| `a` | input | [3:0] | SW[3:0] | 操作数 A |
| `b` | input | [3:0] | SW[7:4] | 操作数 B |
| `op` | input | [1:0] | SW[15:14] | 操作码 (控制指令) |
| `res` | output | [7:0] | LED[7:0] | 运算结果 (8位宽以防溢出) |

### 逻辑功能表 (Operation Table)

内部由 `case` 语句实现的 MUX (多路选择器) 控制：

| OP Code | 功能 (Function) | 关键语法点 | 硬件底层 |
| --- | --- | --- | --- |
| `2'b00` | **加法** (Add) | `res = a + b;` | Adder / Carry Chain |
| `2'b01` | **减法** (Sub) | `res = a - b;` | Adder + Inverters |
| `2'b10` | **符号扩展** (Sign Ext) | `{{4{a[3]}}, a}` | Wiring (Replication) |
| `2'b11` | **位反转** (Bit Rev) | `{...a[0], a[3]}` | Wiring (Re-ordering) |

## 5. 验证与仿真 (Verification)

### 综合结果 (Synthesis)

* **Status**: Passed.
* **Schematic Check**: 确认生成了 IBUF (输入缓冲), OBUF (输出缓冲), LUT (查找表) 以及 Carry4 (进位链)。
* **关键认知**: `case` 语句在物理层被综合为 MUX 或 LUT（查找表），硬件并没有“思考”，只有“查表”或“选通”。

### 仿真测试 (Simulation)

* **Testbench**: `alu_tb.v`
* **关键机制**:
* 使用 `reg` 模拟手指拨动开关 (保持信号)。
* 使用 `wire` 模拟示波器探针 (观察结果)。
* 使用 `#10` 模拟物理延迟，让波形可观测。


* **测试用例**:
1. `0-10ns`: **3 + 2 = 05** (Pass)
2. `10-20ns`: **3 - 2 = 01** (Pass)
3. `20-30ns`: **-1 (4bit) -> -1 (8bit)** (Pass, Sign Extension verified)
4. `30-40ns`: **1010 -> 0101 (0x5)** (Pass, Bit Reversal verified)



## 6. 核心认知升级 (Key Learnings)

1. **ALU 的本质**: 不是计算器，而是“算术(A) + 逻辑(L) + 单元(U)”。所有运算单元在硬件中是**同时工作**的，MUX 决定了最后谁能输出。
2. **Verilog 只是连线**: 代码描述的不是步骤，而是电路结构。`module` 是芯片外壳，`input` 是金属引脚。
3. **仿真的意义**: "Simulation Passed" 才是电路设计的金标准。波形图就是电路的“心电图”。
4. **CS vs IC**:
* 软件变量 = 内存地址。
* 硬件信号 (`wire`) = 物理导线。
* 软件 `case` = 跳转指令。
* 硬件 `case` = 并行电路 + 选择开关。



## 7. 顾问评价 (Advisor's Note)

> "Day 1 任务超额完成。没有止步于 Schematic，而是坚持推进到了 Simulation 并在波形图中验证了逻辑。你已经从'做题家'进化为了'初级设计师'。保持这个势头，Day 2 的模块化实例化（Hierarchy）才是真正的硬仗。"

---

*Generated by Gemini - Your Brutally Honest Advisor*