这是一个结合了你 Day 4 (HDLBits 强化训练) 和 Day 5 (Vivado UART 实战) 的工程总结。

这份文档不仅记录了代码，更记录了你从“迷茫的复制者”到“清醒的集成者”的心理转折，非常适合作为项目归档。

---

# Project Pre-Burn: Day 4 & 5 - Logic Gates & The Serial Link

> **Date:** 2025-12-30 ~ 2025-12-31 (Beijing Time)
> **Status:** Mission Critical Success (UART Loopback Verified)
> **Author:** Future IC Engineer

## 1. 项目概述 (Overview)

本项目涵盖了《预燃行动》Day 4 与 Day 5 的双重任务。

* **Day 4 (逻辑强化)**：通过 HDLBits 攻克了从自然语言 Spec 到电路逻辑的翻译难关，特别是向量切片（Vector Slicing）思维的觉醒。
* **Day 5 (工程实战)**：在 Vivado 中构建了**工业级 UART 串口回环系统**。经历了“盲目复制”的恐慌后，通过深度代码审计（Code Walkthrough）和波形验证，掌握了 IP 集成与流控握手的核心能力。

**战略意义**：打通了 FPGA 与外界通信的唯一管道，为 Day 6 的加密模块植入做好了物理层准备。

## 2. 理论军火库 (HDLBits Knowledge Base)

在 Day 4 的突击中，我们通过几个极具代表性的题目，修正了对 Verilog 的认知误区：

### A. 规格说明书翻译 (Spec-to-RTL)

* **案例**: `Ringer` (手机情景模式), `Thermostat` (温控器)
* **核心技能**: 将自然语言的“条件判断”转化为布尔逻辑。
* *误区*: 试图用 `if-else` 或反向逻辑（输出控制输入）。
* *正解*: **条件即信号**。`assign motor = ring & vibrate_mode;` —— 只要条件满足，电路自动导通。



### B. 算术即逻辑 (Arithmetic Inference)

* **案例**: `Popcount3` (数 1 的个数)
* **核心技能**: 理解 `+` 运算符在硬件中的物理映射。
* *代码*: `assign out = in[0] + in[1] + in[2];`
* *硬件真相*: 综合器自动调用了 **Full Adder (全加器)**。比手写 XOR 门级电路更高效、更易读。



### C. 向量切片与拼接 (Vector Slicing & Concatenation)

* **案例**: `Gatesv` & `Gatesv100`
* **核心技能**: 彻底摒弃软件循环 (`for`)，使用物理连线对齐。
* *场景*: 寻找左边邻居 (Wrap-around)。
* *Old School*: 写 100 行 `assign` 或容易出错的 `for` 循环。
* *Engineering Way*: `{in[0], in[99:1]}`。利用拼接符 `{}` 实现**循环右移**，一行代码处理 100 位宽。



## 3. Vivado 工程核心: UART Loopback System

Day 5 的核心任务是构建一个“收到什么就发回什么”的串口回环芯片。

### 系统架构 (Architecture)

| 模块 | 文件名 | 角色 | 关键机制 |
| --- | --- | --- | --- |
| **Top** | `top.v` | 主板/集成者 | **Flow Control (流控)**: 连接 RX 的 `done` 和 TX 的 `en`，实现握手。 |
| **RX** | `uart_rx.v` | 接收器 (IP) | **Oversampling (过采样)**: 在 `CYCLE/2` 处采样，盲猜数据中心点。 |
| **TX** | `uart_tx.v` | 发送器 (IP) | **Serializer (并串转换)**: 利用移位逻辑将 8-bit 并行数据排队输出。 |

### 关键技术审计 (Technical Audit)

经过代码深度拆解，我们掌握了以下“黑盒”内部的秘密：

1. **异步同步化 (Blind Synchronization)**:
* UART 没有时钟线。RX 依靠检测起始位（下降沿）启动计数器，通过计算 `cnt == CYCLE/2` 来精确定位数据中央。


2. **数据流路由 (Routing)**:
* 在 `top.v` 中，`wire [7:0] data_loop` 充当了数据的桥梁，证明了**集成工程师**的核心价值在于“正确的连线”而非“重复造轮子”。


3. **时空观念 (Time & Space)**:
* 波特率 `115200` 意味着传输 1bit 需要 `8.68us`。
* **教训**: 仿真时必须跑得足够久（`Run All`），并学会使用 **Zoom Fit**，否则只能看到微观世界的直线。



## 4. 验证与仿真 (Verification)

* **Testbench**: `tb_top.v`
* **激励设计**: 模拟上位机发送 `0x55` (01010101)。
* **验收标准 (Sign-off Criteria)**:
1. `rx_line` 出现输入波形。
2. `rx_done_sig` 拉高（RX 完成）。
3. **紧接着**，`tx_line` 出现与输入完全一致的波形（回环成功）。


* **结果**: 仿真波形完美匹配，逻辑闭环。

## 5. 核心认知升级 (Key Learnings)

1. **从“写手”到“架构师”**:
* Day 1-4 我关注怎么写 `assign`。
* Day 5 我学会了如何**调用 IP**。IC 行业的真相是：80% 的工作是 Integration，能把别人的代码跑通本身就是核心能力。


2. **克服“冒名顶替综合症”**:
* 一度认为“复制粘贴”没有意义。
* **觉醒**: 通过修改波特率参数（115200 -> 9600）并预测波形变化，证明了自己对系统的掌控力。理解原理 > 默写代码。


3. **仿真工具链**:
* 熟练掌握了 `Shift+F5` (Zoom Fit) 和 `Ctrl+Scroll` (局部缩放)，不再在纳秒级的平原里迷路。



## 6. 顾问评价 (Advisor's Note)

> "这是惊心动魄的一天。你差点因为'觉得自己没学到东西'而放弃，但最终通过直面代码内部逻辑（Oversampling & Handshake）找回了掌控感。
> 记住：**Hardware Design is about connecting blocks correctly, not just building blocks.**
> 你的 UART 管道已经铺设完毕。Day 6，我们将往这个管道里灌入真正的'毒药'——LFSR 加密算法。准备好，难度要升级了。"

---

*Generated by Gemini - Your Brutally Honest Advisor*